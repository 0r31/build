From 40305185f76391e94f902b6d9df0db34537f944e Mon Sep 17 00:00:00 2001
From: Igor Pecovnik <igor.pecovnik@gmail.com>
Date: Thu, 17 Dec 2020 20:39:42 +0100
Subject: [PATCH] Add hardware random number generator nodes for RK3399 boards

Signed-off-by: Igor Pecovnik <igor.pecovnik@gmail.com>
---
 arch/arm64/boot/dts/rockchip/rk3399-firefly.dts        | 4 ++++
 arch/arm64/boot/dts/rockchip/rk3399-khadas-edge.dtsi   | 4 ++++
 arch/arm64/boot/dts/rockchip/rk3399-kobol-helios64.dts | 4 ++++
 arch/arm64/boot/dts/rockchip/rk3399-nanopi4.dtsi       | 4 ++++
 arch/arm64/boot/dts/rockchip/rk3399-orangepi-4.dts     | 4 ++++
 arch/arm64/boot/dts/rockchip/rk3399-orangepi.dts       | 4 ++++
 arch/arm64/boot/dts/rockchip/rk3399-pinebook-pro.dts   | 4 ++++
 arch/arm64/boot/dts/rockchip/rk3399-roc-pc.dtsi        | 4 ++++
 arch/arm64/boot/dts/rockchip/rk3399-rock-pi-4.dtsi     | 4 ++++
 arch/arm64/boot/dts/rockchip/rk3399-rock960.dtsi       | 4 ++++
 arch/arm64/boot/dts/rockchip/rk3399-rockpro64.dtsi     | 4 ++++
 11 files changed, 44 insertions(+)

diff --git a/arch/arm64/boot/dts/rockchip/rk3399-firefly.dts b/arch/arm64/boot/dts/rockchip/rk3399-firefly.dts
index 621ed793d..ed3d2cdf8 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-firefly.dts
+++ b/arch/arm64/boot/dts/rockchip/rk3399-firefly.dts
@@ -820,6 +820,10 @@ &uart2 {
 	status = "okay";
 };
 
+&rng {
+	status = "okay";
+};
+
 &usb_host0_ehci {
 	status = "okay";
 };
diff --git a/arch/arm64/boot/dts/rockchip/rk3399-khadas-edge.dtsi b/arch/arm64/boot/dts/rockchip/rk3399-khadas-edge.dtsi
index e36837c04..7d4e51fcf 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-khadas-edge.dtsi
+++ b/arch/arm64/boot/dts/rockchip/rk3399-khadas-edge.dtsi
@@ -756,6 +756,10 @@ &uart2 {
 	status = "okay";
 };
 
+&rng {
+	status = "okay";
+};
+
 &usb_host0_ehci {
 	status = "okay";
 };
diff --git a/arch/arm64/boot/dts/rockchip/rk3399-kobol-helios64.dts b/arch/arm64/boot/dts/rockchip/rk3399-kobol-helios64.dts
index e666bd5ae..fb5646835 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-kobol-helios64.dts
+++ b/arch/arm64/boot/dts/rockchip/rk3399-kobol-helios64.dts
@@ -1064,6 +1064,10 @@ &uart0 {
 	status = "okay";
 };
 
+&rng {
+	status = "okay";
+};
+
 &uart2 {
 	status = "okay";
 };
diff --git a/arch/arm64/boot/dts/rockchip/rk3399-nanopi4.dtsi b/arch/arm64/boot/dts/rockchip/rk3399-nanopi4.dtsi
index 86e802fd8..d0ad50ff5 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-nanopi4.dtsi
+++ b/arch/arm64/boot/dts/rockchip/rk3399-nanopi4.dtsi
@@ -752,6 +752,10 @@ &uart2 {
 	status = "okay";
 };
 
+&rng {
+	status = "okay";
+};
+
 &usbdrd3_0 {
 	status = "okay";
 };
diff --git a/arch/arm64/boot/dts/rockchip/rk3399-orangepi-4.dts b/arch/arm64/boot/dts/rockchip/rk3399-orangepi-4.dts
index 3db521c43..9f9c8f9cb 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-orangepi-4.dts
+++ b/arch/arm64/boot/dts/rockchip/rk3399-orangepi-4.dts
@@ -429,6 +429,10 @@ &uart2 {
 	status = "okay";
 };
 
+&rng {
+	status = "okay";
+};
+
 &vopb {
 	status = "okay";
 };
diff --git a/arch/arm64/boot/dts/rockchip/rk3399-orangepi.dts b/arch/arm64/boot/dts/rockchip/rk3399-orangepi.dts
index 6163ae806..9d1c60434 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-orangepi.dts
+++ b/arch/arm64/boot/dts/rockchip/rk3399-orangepi.dts
@@ -777,6 +777,10 @@ &uart2 {
 	status = "okay";
 };
 
+&rng {
+	status = "okay";
+};
+
 &usb_host0_ehci {
 	status = "okay";
 };
diff --git a/arch/arm64/boot/dts/rockchip/rk3399-pinebook-pro.dts b/arch/arm64/boot/dts/rockchip/rk3399-pinebook-pro.dts
index 700a39158..56fe09be1 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-pinebook-pro.dts
+++ b/arch/arm64/boot/dts/rockchip/rk3399-pinebook-pro.dts
@@ -1110,6 +1110,10 @@ &uart2 {
 	status = "okay";
 };
 
+&rng {
+	status = "okay";
+};
+
 &usb_host0_ehci {
 	status = "okay";
 };
diff --git a/arch/arm64/boot/dts/rockchip/rk3399-roc-pc.dtsi b/arch/arm64/boot/dts/rockchip/rk3399-roc-pc.dtsi
index ae3b1bdfc..caa4ca69f 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-roc-pc.dtsi
+++ b/arch/arm64/boot/dts/rockchip/rk3399-roc-pc.dtsi
@@ -774,6 +774,10 @@ &uart2 {
 	status = "okay";
 };
 
+&rng {
+	status = "okay";
+};
+
 &usb_host0_ehci {
 	status = "okay";
 };
diff --git a/arch/arm64/boot/dts/rockchip/rk3399-rock-pi-4.dtsi b/arch/arm64/boot/dts/rockchip/rk3399-rock-pi-4.dtsi
index 68a8c77ca..c1bcccccf 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-rock-pi-4.dtsi
+++ b/arch/arm64/boot/dts/rockchip/rk3399-rock-pi-4.dtsi
@@ -752,6 +752,10 @@ &uart0 {
 	pinctrl-0 = <&uart0_xfer &uart0_cts &uart0_rts>;
 };
 
+&rng {
+	status = "okay";
+};
+
 &uart2 {
 	status = "okay";
 };
diff --git a/arch/arm64/boot/dts/rockchip/rk3399-rock960.dtsi b/arch/arm64/boot/dts/rockchip/rk3399-rock960.dtsi
index 5e3ac589b..5fae892ac 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-rock960.dtsi
+++ b/arch/arm64/boot/dts/rockchip/rk3399-rock960.dtsi
@@ -581,6 +581,10 @@ &uart2 {
 	status = "okay";
 };
 
+&rng {
+	status = "okay";
+};
+
 &tcphy0 {
 	status = "okay";
 };
diff --git a/arch/arm64/boot/dts/rockchip/rk3399-rockpro64.dtsi b/arch/arm64/boot/dts/rockchip/rk3399-rockpro64.dtsi
index 60148a0ea..c96d7c0d1 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-rockpro64.dtsi
+++ b/arch/arm64/boot/dts/rockchip/rk3399-rockpro64.dtsi
@@ -775,6 +775,10 @@ &uart2 {
 	status = "okay";
 };
 
+&rng {
+	status = "okay";
+};
+
 &usb_host0_ehci {
 	status = "okay";
 };
-- 
Created with Armbian build tools https://github.com/armbian/build

